<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Multi-services | Goyave</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" sizes="16x16" href="/goyave_16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/goyave_32.png">
    <link rel="icon" type="image/png" sizes="64x64" href="/goyave_64.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/goyave_128.png">
    <link rel="icon" type="image/png" sizes="256x256" href="/goyave_256.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/goyave_512.png">
    <meta name="description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta name="og:title" content="Multi-services - Goyave">
    <meta name="twitter:title" content="Multi-services - Goyave">
    <meta name="title" content="Multi-services - Goyave">
    <meta property="twitter:description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta property="twitter:image:src" content="https://goyave.dev/goyave_banner.png">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta property="og:image" content="https://goyave.dev/goyave_banner.png">
    <meta property="og:site_name" content="Goyave">
    
    <link rel="preload" href="/assets/css/0.styles.26dd6e4b.css" as="style"><link rel="preload" href="/assets/js/app.6ffc6220.js" as="script"><link rel="preload" href="/assets/js/5.1c93d9fd.js" as="script"><link rel="preload" href="/assets/js/1.f79eb711.js" as="script"><link rel="preload" href="/assets/js/44.06899574.js" as="script"><link rel="preload" href="/assets/js/6.a7e8bb94.js" as="script"><link rel="prefetch" href="/assets/js/10.37f2133a.js"><link rel="prefetch" href="/assets/js/11.4ebe3b0e.js"><link rel="prefetch" href="/assets/js/12.b7810994.js"><link rel="prefetch" href="/assets/js/13.e2bf4254.js"><link rel="prefetch" href="/assets/js/14.5d3ccbdb.js"><link rel="prefetch" href="/assets/js/15.a6526a57.js"><link rel="prefetch" href="/assets/js/16.5a37ced7.js"><link rel="prefetch" href="/assets/js/17.e7b6af0e.js"><link rel="prefetch" href="/assets/js/18.2b65ab11.js"><link rel="prefetch" href="/assets/js/19.387d3088.js"><link rel="prefetch" href="/assets/js/20.41cad5cf.js"><link rel="prefetch" href="/assets/js/21.c81594c8.js"><link rel="prefetch" href="/assets/js/22.45251716.js"><link rel="prefetch" href="/assets/js/23.c07afcba.js"><link rel="prefetch" href="/assets/js/24.62fcae00.js"><link rel="prefetch" href="/assets/js/25.6cceeeb3.js"><link rel="prefetch" href="/assets/js/26.95f226e8.js"><link rel="prefetch" href="/assets/js/27.22739ec1.js"><link rel="prefetch" href="/assets/js/28.fdeac3b0.js"><link rel="prefetch" href="/assets/js/29.9eb65d6d.js"><link rel="prefetch" href="/assets/js/30.cccb87a9.js"><link rel="prefetch" href="/assets/js/31.a2a242a7.js"><link rel="prefetch" href="/assets/js/32.e211a80c.js"><link rel="prefetch" href="/assets/js/33.ccebd016.js"><link rel="prefetch" href="/assets/js/34.fcb0ba15.js"><link rel="prefetch" href="/assets/js/35.42c42f3c.js"><link rel="prefetch" href="/assets/js/36.2ef6b321.js"><link rel="prefetch" href="/assets/js/37.07610d51.js"><link rel="prefetch" href="/assets/js/38.115fd1cc.js"><link rel="prefetch" href="/assets/js/39.11c8fbda.js"><link rel="prefetch" href="/assets/js/4.e0abb74f.js"><link rel="prefetch" href="/assets/js/40.a1be762e.js"><link rel="prefetch" href="/assets/js/41.b73e4345.js"><link rel="prefetch" href="/assets/js/42.82d183c9.js"><link rel="prefetch" href="/assets/js/43.af2ed02a.js"><link rel="prefetch" href="/assets/js/45.c63bf94c.js"><link rel="prefetch" href="/assets/js/46.277fc903.js"><link rel="prefetch" href="/assets/js/47.117a430d.js"><link rel="prefetch" href="/assets/js/48.33f3affc.js"><link rel="prefetch" href="/assets/js/49.b9251756.js"><link rel="prefetch" href="/assets/js/50.a1711a53.js"><link rel="prefetch" href="/assets/js/51.9bd1e763.js"><link rel="prefetch" href="/assets/js/52.d36faf2a.js"><link rel="prefetch" href="/assets/js/53.1da7fe88.js"><link rel="prefetch" href="/assets/js/54.e06eaa9f.js"><link rel="prefetch" href="/assets/js/55.2ca44bcc.js"><link rel="prefetch" href="/assets/js/56.9c2d768a.js"><link rel="prefetch" href="/assets/js/57.e1510a48.js"><link rel="prefetch" href="/assets/js/58.9125b2d0.js"><link rel="prefetch" href="/assets/js/59.19823e8a.js"><link rel="prefetch" href="/assets/js/60.c8bb5961.js"><link rel="prefetch" href="/assets/js/61.456be12d.js"><link rel="prefetch" href="/assets/js/62.9660de18.js"><link rel="prefetch" href="/assets/js/7.ae4e33f4.js"><link rel="prefetch" href="/assets/js/8.b5561a44.js"><link rel="prefetch" href="/assets/js/9.53821f89.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f357826b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.26dd6e4b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-3fedb5af><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/goyave_64.png" alt="Goyave" class="logo"> <span class="site-name can-hide">Goyave</span></a> <div class="links"><div class="user-settings"><a title="Dark theme" href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M8 0c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zM8 15c-3.9 0-7-3.1-7-7 0-2.4 1.2-4.6 3.2-5.9-0.1 0.6-0.2 1.3-0.2 1.9 0 4.9 4 8.9 8.9 9-1.3 1.3-3 2-4.9 2z"></path></svg></a></div> <form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide Menu" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide Menu" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  v4
</a></li><li class="dropdown-item"><!----> <a href="/v3/guide/" class="nav-link router-link-active">
  v3
</a></li></ul></div></div><div class="nav-item"><a href="https://pkg.go.dev/goyave.dev/goyave/v4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pkg.go.dev
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/go-goyave/goyave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide Menu" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide Menu" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  v4
</a></li><li class="dropdown-item"><!----> <a href="/v3/guide/" class="nav-link router-link-active">
  v3
</a></li></ul></div></div><div class="nav-item"><a href="https://pkg.go.dev/goyave.dev/goyave/v4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pkg.go.dev
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/go-goyave/goyave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="sponsors" data-v-094edf48><!----> <a href="https://github.com/sponsors/System-Glitch/" rel="nofollow" target="_blank" class="become-backer" data-v-094edf48>
    Become a Sponsor
  </a></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Basics</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Advanced</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v3/guide/advanced/helpers.html" class="sidebar-link">Helpers</a></li><li><a href="/v3/guide/advanced/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/v3/guide/advanced/localization.html" class="sidebar-link">Localization</a></li><li><a href="/v3/guide/advanced/testing.html" class="sidebar-link">Testing</a></li><li><a href="/v3/guide/advanced/multi-services.html" aria-current="page" class="active sidebar-link">Multi-services</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v3/guide/advanced/multi-services.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/v3/guide/advanced/multi-services.html#startup-hooks" class="sidebar-link">Startup hooks</a></li><li class="sidebar-sub-header"><a href="/v3/guide/advanced/multi-services.html#shutdown-hooks" class="sidebar-link">Shutdown hooks</a></li><li class="sidebar-sub-header"><a href="/v3/guide/advanced/multi-services.html#start-the-server" class="sidebar-link">Start the server</a></li><li class="sidebar-sub-header"><a href="/v3/guide/advanced/multi-services.html#stop-the-server" class="sidebar-link">Stop the server</a></li><li class="sidebar-sub-header"><a href="/v3/guide/advanced/multi-services.html#server-status" class="sidebar-link">Server status</a></li><li class="sidebar-sub-header"><a href="/v3/guide/advanced/multi-services.html#maintenance-mode" class="sidebar-link">Maintenance mode</a></li></ul></li><li><a href="/v3/guide/advanced/cors.html" class="sidebar-link">CORS</a></li><li><a href="/v3/guide/advanced/status-handlers.html" class="sidebar-link">Status Handlers</a></li><li><a href="/v3/guide/advanced/logging.html" class="sidebar-link">Logging</a></li><li><a href="/v3/guide/advanced/rate-limiting.html" class="sidebar-link">Rate Limiting</a></li><li><a href="/v3/guide/advanced/websocket.html" class="sidebar-link">Websocket</a></li></ul></section></li></ul> </aside> <main class="page"><div class="theme-default-content" data-v-3fedb5af><div class="custom-block warning" data-v-3fedb5af><p class="custom-block-title" data-v-3fedb5af>Outdated documentation</p> <p data-v-3fedb5af>
          You are reading documentation for <b data-v-3fedb5af>v3</b>, which is an outdated version. Click
          <a href="/guide/advanced/multi-services.html" data-v-3fedb5af>here</a> to go to the latest
          documentation.
        </p></div></div> <div class="theme-default-content content__default"><h1 id="multi-services"><a href="#multi-services" class="header-anchor">#</a> Multi-services</h1> <p></p><div class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#startup-hooks">Startup hooks</a></li><li><a href="#shutdown-hooks">Shutdown hooks</a></li><li><a href="#start-the-server">Start the server</a><ul><li><a href="#errors">Errors</a></li></ul></li><li><a href="#stop-the-server">Stop the server</a></li><li><a href="#server-status">Server status</a></li><li><a href="#maintenance-mode">Maintenance mode</a></li></ul></div><p></p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Sometimes you need to run several services in the same executable. For example if you are also listening to a message queue on top of running your web API. Goyave can be run in a goroutine and stopped on-demand.</p> <p>All functions below are features that require the <code>goyave</code> package to be imported.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;goyave.dev/goyave/v3&quot;</span>
</code></pre></div><h2 id="startup-hooks"><a href="#startup-hooks" class="header-anchor">#</a> Startup hooks</h2> <p>Startup hooks are functions executed in a goroutine after the server finished initializing. This is especially useful when you want to start other services or execute specific commands while being sure the server is up and running, ready to respond to incoming requests. Startup hooks must be registered <strong>before</strong> the <code>goyave.Start()</code> call.</p> <h4 id="goyave-registerstartuphook"><a href="#goyave-registerstartuphook" class="header-anchor">#</a> goyave.RegisterStartupHook</h4> <p>Register a startup hook to execute some code once the server is ready and running.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td><code>hook func()</code></td> <td><code>void</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>goyave<span class="token punctuation">.</span><span class="token function">RegisterStartupHook</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    goyave<span class="token punctuation">.</span>Logger<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Server ready.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="goyave-clearstartuphooks"><a href="#goyave-clearstartuphooks" class="header-anchor">#</a> goyave.ClearStartupHooks</h4> <p>Clear all registered startup hooks. Useful when you are writing tests or developing a service able to restart your server multiple times.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>void</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>goyave<span class="token punctuation">.</span><span class="token function">ClearStartupHooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="shutdown-hooks"><a href="#shutdown-hooks" class="header-anchor">#</a> Shutdown hooks</h2> <p>Shutdown hooks are functions executed when the server stops. This is especially useful when you want to stop other services when the server stops.</p> <h4 id="goyave-registershutdownhook"><a href="#goyave-registershutdownhook" class="header-anchor">#</a> goyave.RegisterShutdownHook</h4> <p>Register a shutdown hook to execute some code after the server stopped. Shutdown hooks are executed before <code>goyave.Start()</code> returns.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td><code>hook func()</code></td> <td><code>void</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>goyave<span class="token punctuation">.</span><span class="token function">RegisterShutdownHook</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    goyave<span class="token punctuation">.</span>Logger<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Server shutdown.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="goyave-clearshutdownhooks"><a href="#goyave-clearshutdownhooks" class="header-anchor">#</a> goyave.ClearShutdownHooks</h4> <p>Clear all registered shutdown hooks. Useful when you are writing tests or developing a service able to restart your server multiple times.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>void</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>goyave<span class="token punctuation">.</span><span class="token function">ClearShutdownHooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="start-the-server"><a href="#start-the-server" class="header-anchor">#</a> Start the server</h2> <h4 id="goyave-start"><a href="#goyave-start" class="header-anchor">#</a> goyave.Start</h4> <p>Starts the server. This functions needs a route registrer function as a parameter. Learn more in the <a href="/v3/guide/basics/routing.html">routing</a> section.<br>
The configuration is not reloaded if you call <code>Start</code> multiple times. You can still reload the configuration with <code>config.Load()</code> if you need it.
This operation is <strong>blocking</strong>. Triggers a panic if the server is already running. Errors returned can be safely type-asserted to <code>*goyave.Error</code>.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td><code>routeRegistrer func(*goyave.Router)</code></td> <td><code>error</code></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> err <span class="token operator">:=</span> goyave<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>Register<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>goyave<span class="token punctuation">.</span>Error<span class="token punctuation">)</span><span class="token punctuation">.</span>ExitCode<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Running the server in the background:</strong></p> <p>You can start the server in a goroutine. However, if you do this and the main goroutine terminates, the server will not shutdown gracefully and the program will exit right away. Be sure to call <code>goyave.Stop()</code> to stop the server gracefully before exiting. Learn more in the next section.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> goyave<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>Register<span class="token punctuation">)</span>
<span class="token comment">//...</span>
goyave<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="errors"><a href="#errors" class="header-anchor">#</a> Errors</h3> <p>Errors generated byt the server itself (when calling <code>Start()</code>) are wrapped into an instance of <code>*goyave.Error</code>. This struct contains an exit code and the original error.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Error <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ExitCode <span class="token builtin">int</span>
	Err      <span class="token builtin">error</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Exit codes:</strong></p> <ul><li><code>2</code>: Panic (server already running, error when loading language files, etc)</li> <li><code>3</code>: Configuration is invalid</li> <li><code>4</code>: An error occurred when opening network listener</li> <li><code>5</code>: An error occurred in the HTTP server</li></ul> <h2 id="stop-the-server"><a href="#stop-the-server" class="header-anchor">#</a> Stop the server</h2> <p>When the running process receives a <code>SIGINT</code> or a <code>SIGTERM</code> signal, for example when you press <code>CTRL+C</code> to interrupt the program, the server will shutdown gracefully, so you don't have to handle that yourself.</p> <p>However, if you start the server in a goroutine, you have the responsibility to shutdown properly. If you exit the program manually or if the main goroutine terminates, ensure that <code>goyave.Stop()</code> is called. If the program exits because of an interruption signal, the server will shutdown gracefully.</p> <h4 id="goyave-stop"><a href="#goyave-stop" class="header-anchor">#</a> goyave.Stop</h4> <p>Stop the server gracefully without interrupting any active connections. Make sure the program doesn't exit and waits instead for Stop to return.</p> <p>Stop does not attempt to close nor wait for hijacked connections such as WebSockets. The caller of <code>Stop</code> should separately notify such long-lived connections of shutdown and wait for them to close, if desired.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>void</code></td></tr></tbody></table> <p><strong>Examples:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>goyave<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="server-status"><a href="#server-status" class="header-anchor">#</a> Server status</h2> <p>The <code>goyave.IsReady()</code> function lets you know if the server is running or not.</p> <p>This function should not be used to wait for the server to be ready. Use a startup hook instead.</p> <h4 id="goyave-isready"><a href="#goyave-isready" class="header-anchor">#</a> goyave.IsReady</h4> <p>Returns true if the server is ready to receive and serve incoming requests.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>bool</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> goyave<span class="token punctuation">.</span><span class="token function">IsReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    goyave<span class="token punctuation">.</span>Logger<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Server is ready&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="maintenance-mode"><a href="#maintenance-mode" class="header-anchor">#</a> Maintenance mode</h2> <p><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>Since v2.1.0</span></p> <p>On top of being able to start the server in maintenance mode using the <code>maintenance</code> configuration entry, you can enable and disable this mode at runtime.</p> <div class="table"><p><a href="#goyave-enablemaintenance">EnableMaintenance</a> <a href="#goyave-disablemaintenance">DisableMaintenance</a> <a href="#goyave-ismaintenanceenabled">IsMaintenanceEnabled</a></p></div><h4 id="goyave-enablemaintenance"><a href="#goyave-enablemaintenance" class="header-anchor">#</a> goyave.EnableMaintenance</h4> <p>Replace the main server handler with the &quot;Service Unavailable&quot; handler.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>void</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>goyave<span class="token punctuation">.</span><span class="token function">EnableMaintenance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="goyave-disablemaintenance"><a href="#goyave-disablemaintenance" class="header-anchor">#</a> goyave.DisableMaintenance</h4> <p>Replace the main server handler with the original router.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>void</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>goyave<span class="token punctuation">.</span><span class="token function">DisableMaintenance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="goyave-ismaintenanceenabled"><a href="#goyave-ismaintenanceenabled" class="header-anchor">#</a> goyave.IsMaintenanceEnabled</h4> <p>Returns true if the server is currently in maintenance mode.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>bool</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>goyave<span class="token punctuation">.</span><span class="token function">IsMaintenanceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/go-goyave/goyave.dev/edit/master/src/v3/guide/advanced/multi-services.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v3/guide/advanced/testing.html" class="prev">
        Testing
      </a></span> <span class="next"><a href="/v3/guide/advanced/cors.html">
        CORS
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6ffc6220.js" defer></script><script src="/assets/js/5.1c93d9fd.js" defer></script><script src="/assets/js/1.f79eb711.js" defer></script><script src="/assets/js/44.06899574.js" defer></script><script src="/assets/js/6.a7e8bb94.js" defer></script>
  </body>
</html>

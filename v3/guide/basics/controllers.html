<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Controllers | Goyave</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" sizes="16x16" href="/goyave_16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/goyave_32.png">
    <link rel="icon" type="image/png" sizes="64x64" href="/goyave_64.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/goyave_128.png">
    <link rel="icon" type="image/png" sizes="256x256" href="/goyave_256.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/goyave_512.png">
    <meta name="description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta name="og:title" content="Controllers - Goyave">
    <meta name="twitter:title" content="Controllers - Goyave">
    <meta name="title" content="Controllers - Goyave">
    <meta property="twitter:description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta property="twitter:image:src" content="https://goyave.dev/goyave_banner.png">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta property="og:image" content="https://goyave.dev/goyave_banner.png">
    <meta property="og:site_name" content="Goyave">
    
    <link rel="preload" href="/assets/css/0.styles.26dd6e4b.css" as="style"><link rel="preload" href="/assets/js/app.6ffc6220.js" as="script"><link rel="preload" href="/assets/js/5.1c93d9fd.js" as="script"><link rel="preload" href="/assets/js/1.f79eb711.js" as="script"><link rel="preload" href="/assets/js/50.a1711a53.js" as="script"><link rel="prefetch" href="/assets/js/10.37f2133a.js"><link rel="prefetch" href="/assets/js/11.4ebe3b0e.js"><link rel="prefetch" href="/assets/js/12.b7810994.js"><link rel="prefetch" href="/assets/js/13.e2bf4254.js"><link rel="prefetch" href="/assets/js/14.5d3ccbdb.js"><link rel="prefetch" href="/assets/js/15.a6526a57.js"><link rel="prefetch" href="/assets/js/16.5a37ced7.js"><link rel="prefetch" href="/assets/js/17.e7b6af0e.js"><link rel="prefetch" href="/assets/js/18.2b65ab11.js"><link rel="prefetch" href="/assets/js/19.387d3088.js"><link rel="prefetch" href="/assets/js/20.41cad5cf.js"><link rel="prefetch" href="/assets/js/21.c81594c8.js"><link rel="prefetch" href="/assets/js/22.45251716.js"><link rel="prefetch" href="/assets/js/23.c07afcba.js"><link rel="prefetch" href="/assets/js/24.62fcae00.js"><link rel="prefetch" href="/assets/js/25.6cceeeb3.js"><link rel="prefetch" href="/assets/js/26.95f226e8.js"><link rel="prefetch" href="/assets/js/27.22739ec1.js"><link rel="prefetch" href="/assets/js/28.fdeac3b0.js"><link rel="prefetch" href="/assets/js/29.9eb65d6d.js"><link rel="prefetch" href="/assets/js/30.cccb87a9.js"><link rel="prefetch" href="/assets/js/31.a2a242a7.js"><link rel="prefetch" href="/assets/js/32.e211a80c.js"><link rel="prefetch" href="/assets/js/33.ccebd016.js"><link rel="prefetch" href="/assets/js/34.fcb0ba15.js"><link rel="prefetch" href="/assets/js/35.42c42f3c.js"><link rel="prefetch" href="/assets/js/36.2ef6b321.js"><link rel="prefetch" href="/assets/js/37.07610d51.js"><link rel="prefetch" href="/assets/js/38.115fd1cc.js"><link rel="prefetch" href="/assets/js/39.11c8fbda.js"><link rel="prefetch" href="/assets/js/4.e0abb74f.js"><link rel="prefetch" href="/assets/js/40.a1be762e.js"><link rel="prefetch" href="/assets/js/41.b73e4345.js"><link rel="prefetch" href="/assets/js/42.82d183c9.js"><link rel="prefetch" href="/assets/js/43.af2ed02a.js"><link rel="prefetch" href="/assets/js/44.06899574.js"><link rel="prefetch" href="/assets/js/45.c63bf94c.js"><link rel="prefetch" href="/assets/js/46.277fc903.js"><link rel="prefetch" href="/assets/js/47.117a430d.js"><link rel="prefetch" href="/assets/js/48.33f3affc.js"><link rel="prefetch" href="/assets/js/49.b9251756.js"><link rel="prefetch" href="/assets/js/51.9bd1e763.js"><link rel="prefetch" href="/assets/js/52.d36faf2a.js"><link rel="prefetch" href="/assets/js/53.1da7fe88.js"><link rel="prefetch" href="/assets/js/54.e06eaa9f.js"><link rel="prefetch" href="/assets/js/55.2ca44bcc.js"><link rel="prefetch" href="/assets/js/56.9c2d768a.js"><link rel="prefetch" href="/assets/js/57.e1510a48.js"><link rel="prefetch" href="/assets/js/58.9125b2d0.js"><link rel="prefetch" href="/assets/js/59.19823e8a.js"><link rel="prefetch" href="/assets/js/6.a7e8bb94.js"><link rel="prefetch" href="/assets/js/60.c8bb5961.js"><link rel="prefetch" href="/assets/js/61.456be12d.js"><link rel="prefetch" href="/assets/js/62.9660de18.js"><link rel="prefetch" href="/assets/js/7.ae4e33f4.js"><link rel="prefetch" href="/assets/js/8.b5561a44.js"><link rel="prefetch" href="/assets/js/9.53821f89.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f357826b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.26dd6e4b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-3fedb5af><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/goyave_64.png" alt="Goyave" class="logo"> <span class="site-name can-hide">Goyave</span></a> <div class="links"><div class="user-settings"><a title="Dark theme" href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M8 0c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zM8 15c-3.9 0-7-3.1-7-7 0-2.4 1.2-4.6 3.2-5.9-0.1 0.6-0.2 1.3-0.2 1.9 0 4.9 4 8.9 8.9 9-1.3 1.3-3 2-4.9 2z"></path></svg></a></div> <form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide Menu" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide Menu" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  v4
</a></li><li class="dropdown-item"><!----> <a href="/v3/guide/" class="nav-link router-link-active">
  v3
</a></li></ul></div></div><div class="nav-item"><a href="https://pkg.go.dev/goyave.dev/goyave/v4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pkg.go.dev
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/go-goyave/goyave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide Menu" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide Menu" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  v4
</a></li><li class="dropdown-item"><!----> <a href="/v3/guide/" class="nav-link router-link-active">
  v3
</a></li></ul></div></div><div class="nav-item"><a href="https://pkg.go.dev/goyave.dev/goyave/v4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pkg.go.dev
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/go-goyave/goyave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="sponsors" data-v-094edf48><!----> <a href="https://github.com/sponsors/System-Glitch/" rel="nofollow" target="_blank" class="become-backer" data-v-094edf48>
    Become a Sponsor
  </a></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Basics</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v3/guide/basics/routing.html" class="sidebar-link">Routing</a></li><li><a href="/v3/guide/basics/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/v3/guide/basics/requests.html" class="sidebar-link">Requests</a></li><li><a href="/v3/guide/basics/controllers.html" aria-current="page" class="active sidebar-link">Controllers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v3/guide/basics/controllers.html#defining-controllers" class="sidebar-link">Defining controllers</a></li><li class="sidebar-sub-header"><a href="/v3/guide/basics/controllers.html#handlers" class="sidebar-link">Handlers</a></li><li class="sidebar-sub-header"><a href="/v3/guide/basics/controllers.html#naming-conventions" class="sidebar-link">Naming conventions</a></li></ul></li><li><a href="/v3/guide/basics/responses.html" class="sidebar-link">Responses</a></li><li><a href="/v3/guide/basics/database.html" class="sidebar-link">Database</a></li><li><a href="/v3/guide/basics/validation.html" class="sidebar-link">Validation</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advanced</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"><div class="theme-default-content" data-v-3fedb5af><div class="custom-block warning" data-v-3fedb5af><p class="custom-block-title" data-v-3fedb5af>Outdated documentation</p> <p data-v-3fedb5af>
          You are reading documentation for <b data-v-3fedb5af>v3</b>, which is an outdated version. Click
          <a href="/guide/basics/controllers.html" data-v-3fedb5af>here</a> to go to the latest
          documentation.
        </p></div></div> <div class="theme-default-content content__default"><h1 id="controllers"><a href="#controllers" class="header-anchor">#</a> Controllers</h1> <p></p><div class="table-of-contents"><ul><li><a href="#defining-controllers">Defining controllers</a></li><li><a href="#handlers">Handlers</a></li><li><a href="#naming-conventions">Naming conventions</a></li></ul></div><p></p> <h2 id="defining-controllers"><a href="#defining-controllers" class="header-anchor">#</a> Defining controllers</h2> <p>Controllers are files containing a collection of Handlers related to a specific feature. Each feature should have its own package. For example, if you have a controller handling user registration, user profiles, etc, you should create a <code>http/controller/user</code> package. Creating a package for each feature has the advantage of cleaning up route definitions a lot and helps keeping a clean structure for your project.</p> <p>Let's take a very simple CRUD as an example for a controller definition:
<strong>http/controller/product/product.go</strong>:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Index</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	products <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span>
	result <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">Conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>products<span class="token punctuation">)</span>
	<span class="token keyword">if</span> response<span class="token punctuation">.</span><span class="token function">HandleDatabaseError</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> products<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Show</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	product <span class="token operator">:=</span> model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span>
	result <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">Conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> response<span class="token punctuation">.</span><span class="token function">HandleDatabaseError</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> product<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Store</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	product <span class="token operator">:=</span> model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span>
		Name<span class="token punctuation">:</span>  request<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		Price<span class="token punctuation">:</span> request<span class="token punctuation">.</span><span class="token function">Numeric</span><span class="token punctuation">(</span><span class="token string">&quot;price&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> err <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">Conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span>Error<span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusCreated<span class="token punctuation">,</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">uint</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">:</span> product<span class="token punctuation">.</span>ID<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Update</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	product <span class="token operator">:=</span> model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span>
	db <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">Conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	result <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> response<span class="token punctuation">.</span><span class="token function">HandleDatabaseError</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Model</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Error<span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			response<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Destroy</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	product <span class="token operator">:=</span> model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span>
	db <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">Conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	result <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> response<span class="token punctuation">.</span><span class="token function">HandleDatabaseError</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span>Error<span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			response<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>Learn how to handle database errors <a href="https://gorm.io/docs/error_handling.html" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>It is not necessary to add <code>response.Status(http.StatusNoContent)</code> at the end of <code>Update</code> and <code>Destroy</code> because the framework automatically sets the response status to 204 if its body is empty and no status has been set.</li></ul></div> <h2 id="handlers"><a href="#handlers" class="header-anchor">#</a> Handlers</h2> <p>A <code>Handler</code> is a <code>func(*goyave.Response, *goyave.Request)</code>. The first parameter lets you write a response, and the second contains all the information extracted from the raw incoming request.</p> <p>Read about the available request information in the <a href="/v3/guide/basics/requests.html">Requests</a> section.</p> <p>Controller handlers contain the business logic of your application. They should be concise and focused on what matters for this particular feature in your application. For example, if you develop a service manipulating images, the image processing code shouldn't be written in controller handlers. In that case, the controller handler would simply pass the correct parameters to your image processor and write a response.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// This handler receives an image, optimizes it and sends the result back.</span>
<span class="token keyword">func</span> <span class="token function">OptimizeImage</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    optimizedImg <span class="token operator">:=</span> processing<span class="token punctuation">.</span><span class="token function">OptimizeImage</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span><span class="token string">&quot;image&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    response<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> optimizedImg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Setting the <code>Content-Type</code> header is not necessary. <code>response.Write</code> automatically detects the content type and sets the header accordingly, if the latter has not been defined already.</p></div> <h2 id="naming-conventions"><a href="#naming-conventions" class="header-anchor">#</a> Naming conventions</h2> <ul><li>Controller packages are named after the model they are mostly using, in a singular form. For example a controller for a <code>Product</code> model would be called <code>http/controller/product</code>. If a controller isn't related to a model, then give it an expressive name.</li> <li>Controller handlers are always <strong>exported</strong> so they can be used when registering routes. All functions which aren't handlers <strong>must be unexported</strong>.</li> <li>CRUD operations naming and routing:</li></ul> <table><thead><tr><th>Method</th> <th>URI</th> <th>Handler name</th> <th>Description</th></tr></thead> <tbody><tr><td><code>GET</code></td> <td><code>/product</code></td> <td><code>Index()</code></td> <td>Get the products list</td></tr> <tr><td><code>POST</code></td> <td><code>/product</code></td> <td><code>Store()</code></td> <td>Create a product</td></tr> <tr><td><code>GET</code></td> <td><code>/product/{id}</code></td> <td><code>Show()</code></td> <td>Show a product</td></tr> <tr><td><code>PUT</code> or <code>PATCH</code></td> <td><code>/product/{id}</code></td> <td><code>Update()</code></td> <td>Update a product</td></tr> <tr><td><code>DELETE</code></td> <td><code>/product/{id}</code></td> <td><code>Destroy()</code></td> <td>Delete a product</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/go-goyave/goyave.dev/edit/master/src/v3/guide/basics/controllers.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v3/guide/basics/requests.html" class="prev">
        Requests
      </a></span> <span class="next"><a href="/v3/guide/basics/responses.html">
        Responses
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6ffc6220.js" defer></script><script src="/assets/js/5.1c93d9fd.js" defer></script><script src="/assets/js/1.f79eb711.js" defer></script><script src="/assets/js/50.a1711a53.js" defer></script>
  </body>
</html>
